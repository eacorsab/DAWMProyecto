<!doctype html>
<html lang="en">
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<title>Diccionario</title>
		<script src="codigojs.js"></script>
		<link rel="stylesheet" src="./style.css" type="text/css">
		<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/css/bootstrap.min.css" rel="stylesheet" src="./style.css" integrity="sha384-0evHe/X+R7YkIZDRvuzKMRqM+OrBnVFBL6DOitfPri4tjfHxaWutUpFmBp4vmVor" crossorigin="anonymous">
		<script src="https://d3js.org/d3.v4.js"></script>
		
	</head>
	<body>
		<main class="container-fluid">
			<div class="row">
				<div class="col-12 text-center">
					<h1>Diccionario</h1>
				</div>
			</div>
			<div class="row mb-3 mx-5 ">
				<div class="col-4 mx-auto text-center">
					<textarea id="texto" name="contenido" class="form-control  form-control-sm" rows="10"></textarea>
					<button id="buscar" type="submit" class="btn btn-primary mt-2" onclick="buscar()">Buscar</button>
					
				</div>
			</div>
			<form class="contact_form" action="">
				<div class="row">
					<!-- Input -->
					<div class="col-sm-12 mt-2 mb-6">
						<div class="form-group">
							<div class="input-group">
								<select name="select" class="custom-select custom-select-lg form-control " required="">
								  <option value="-1" selected="">Seleccione el nombre de un autor</option>
								</select>
							</div>
						</div>
					</div>
				</div>
			</form>
			</div>
			<div id="respuesta" class="row row-cols-1 row-cols-md-3 g-4">
				
				
				
			</div>
			<div id="my_dataviz"></div>
		</main>
		<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/js/bootstrap.bundle.min.js" integrity="sha384-pprn3073KE6tl6bjs2QrFaJGz5/SUsLqktiwsUTF55Jfv3qYSDhgCecCxMW52nD2" crossorigin="anonymous"></script>
		<script>

			// set the dimensions and margins of the graph
			var margin = {top: 10, right: 30, bottom: 30, left: 60},
				width = 460 - margin.left - margin.right,
				height = 400 - margin.top - margin.bottom;
			
			// append the svg object to the body of the page
			var svg = d3.select("#my_dataviz")
			  .append("svg")
				.attr("width", width + margin.left + margin.right)
				.attr("height", height + margin.top + margin.bottom)
			  .append("g")
				.attr("transform",
					  "translate(" + margin.left + "," + margin.top + ")");
			
			//Read the data
			d3.csv("https://raw.githubusercontent.com/holtzy/data_to_viz/master/Example_dataset/5_OneCatSevNumOrdered.csv", function(data) {
			
			  // group the data: I want to draw one line per group
			  var sumstat = d3.nest() // nest function allows to group the calculation per level of a factor
				.key(function(d) { return d.name;})
				.entries(data);
			
			  // Add X axis --> it is a date format
			  var x = d3.scaleLinear()
				.domain(d3.extent(data, function(d) { return d.year; }))
				.range([ 0, width ]);
			  svg.append("g")
				.attr("transform", "translate(0," + height + ")")
				.call(d3.axisBottom(x).ticks(5));
			
			  // Add Y axis
			  var y = d3.scaleLinear()
				.domain([0, d3.max(data, function(d) { return +d.n; })])
				.range([ height, 0 ]);
			  svg.append("g")
				.call(d3.axisLeft(y));
			
			  // color palette
			  var res = sumstat.map(function(d){ return d.key }) // list of group names
			  var color = d3.scaleOrdinal()
				.domain(res)
				.range(['#e41a1c','#377eb8','#4daf4a','#984ea3','#ff7f00','#ffff33','#a65628','#f781bf','#999999'])
			
			  // Draw the line
			  svg.selectAll(".line")
				  .data(sumstat)
				  .enter()
				  .append("path")
					.attr("fill", "none")
					.attr("stroke", function(d){ return color(d.key) })
					.attr("stroke-width", 1.5)
					.attr("d", function(d){
					  return d3.line()
						.x(function(d) { return x(d.year); })
						.y(function(d) { return y(+d.n); })
						(d.values)
					})
			
			})
			
			</script>
	</body>
</html>